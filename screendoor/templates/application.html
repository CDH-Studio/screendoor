{% extends 'base_logged_in.html' %}
{% load string_interpolation %}
{% load static %}
{% block content %}

<!-- PLACEHOLDER -->
<div class="container positions">
  <a href="{% url 'position' applicant.parent_position.reference_number applicant.parent_position.id %}" class="btn-flat blue-text sort-positions">‚Üê  {{ applicantText.back_to_position }}: {{ applicant.parent_position.position_title }}</a>
  <input type="hidden" class="hidden" name="position-id" value='{{ position.id }}'>
  <h6 class="btn-flat disabled"></h6>
  <form method="post" id="save-position" enctype="multipart/form-data" action="">
    {% csrf_token %}
    <div class="row">
      <!--Beginning of application card -->
      <div class="col card white hoverable">
        <div class="card-content col s12 applicant-card">
          <!-- Application row 1 headers -->
          <table class="highlight">
            <thead>
              <tr>
                <th colspan="21"><h6>{{ applicantText.applicant_information }}</h6></th>
                <!-- Upload Applications and Delete buttons -->
                <th colspan="3"><input type="button" class="btn-flat right" id="expand-all" value="Expand all"></th>
                <th colspan="1"></th>
                <th colspan="3"><input type="button" class="btn-flat right" id="collapse-all" value="Collapse all"></th>
              </tr>
            </thead>
            <thead class="collapse">
              <tr>
                <th colspan="1"><i class="collapse-arrows material-icons grey-text text-darken-2">keyboard_arrow_down</i></th>
                <th colspan="10">{{ applicantText.applicant_id }}</th>
                <th colspan="4">{{ applicantText.citizenship }}</th>
                <th colspan="4">{{ applicantText.priority }}</th>
                <th colspan="4">{{ applicantText.veterans_preference }}</th>
                <th colspan="4">{{ applicantText.classifications }}</th>
              </tr>
            </thead>
            <!-- Application row 1 body -->
            <tbody>
              <tr>
                <th colspan="1"></th>
                <td colspan="10">{{ applicant.applicant_id }}</td>
                <td colspan="4">{{ applicant.citizenship }}</td>
                <td colspan="4">{{ applicant.priority }}</td>
                <td colspan="4">{{ applicant.veteran_preference }}</td>
                <td colspan="4">{{ applicant.classification_set.all }}</td>
              </tr>
            </tbody>
            <!-- Application row 2 headers -->
            <thead class="collapse">
              <tr>
                <th colspan="1"><i class="collapse-arrows material-icons grey-text text-darken-2">keyboard_arrow_down</i></th>
                <th colspan="5">{{ applicantText.french_working_ability }}</th>
                <th colspan="5">{{ applicantText.english_working_ability }}</th>
                <th colspan="4">{{ applicantText.first_official_language }}</th>
                <th colspan="4">{{ applicantText.written_exam_language }}</th>
                <th colspan="4">{{ applicantText.correspondence_language }}</th>
                <th colspan="4">{{ applicantText.interview_language }}</th>
              </tr>
            </thead>
            <!-- Application row 2 body -->
            <tbody>
              <tr>
                <th colspan="1"></th>
                <td colspan="5">{{ applicant.french_working_ability }}</td>
                <td colspan="5">{{ applicant.english_working_ability }}</td>
                <td colspan="4">{{ applicant.first_official_language }}</td>
                <td colspan="4">{{ applicant.written_exam }}</td>
                <td colspan="4">{{ applicant.correspondence }}</td>
                <td colspan="4">{{ applicant.interview }}</td>
              </tr>
            </tbody>
            <!-- MOCK EDUCATION DATA UNTIL PARSING COMPLETE -->
            {% if educations is not None %}
            <thead>
              <tr>
                <th><h6 class="center">Education</h6></th>
              </tr>
            </thead>
            <thead class="collapse">
              <tr>
                <th colspan="1"><i class="collapse-arrows material-icons grey-text text-darken-2">keyboard_arrow_down</i></th>
                <th colspan="4">Academic Level</th>
                <th colspan="3">Institution</th>
                <th colspan="5">Area of Study</th>
                <th colspan="4">Specialization</th>
                <th colspan="3">Program Length</th>
                <th colspan="3">Years Completed</th>
                <th colspan="4">Graduation Date</th>
              </tr>
            </thead>
            {% for education in educations %}
            <tbody>
              <tr>
                <td colspan="1">1.</td>
                <td colspan="4" name="position-classification">{{ education.academic_level }}</td>
                <td colspan="3" name="position-classification">{{ education.institution }}</td>
                <td colspan="5" name="position-classification">{{ education.area_of_study }}</td>
                <td colspan="4" name="position-reference">{{ education.specialization }}</td>
                <td colspan="3" name="position-reference">{{ education.program_length }}</td>
                <td colspan="3" name="position-reference">{{ education.num_years_completed }}</td>
                <td colspan="4" name="position-reference">{{ education.graduation_date }}</td>
              </tr>
            </tbody>
            {% endfor %}
            <!-- END OF MOCK EDUCATION DATA -->
            {% endif %}
            <thead>
              <tr>
                <th><h6 class="center">{{ applicantText.questions }}</h6></th>
              </tr>
            </thead>
            {% for question in questions reversed %}
            <!-- Question -->
            <thead class="collapse">
              <tr>
                <th colspan="1"><i class="collapse-arrows material-icons grey-text text-darken-2">keyboard_arrow_down</i></th>
                <td colspan="1">{{ forloop.counter }}.</td>
                <th colspan="25">{{ question.question_text }}</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="1" class="table-subhead"></td>
                <td colspan="11" class="table-subhead">{{ applicantText.question }}</td>
                <td colspan="1" class="table-subhead"></td>
                <td colspan="3" class="table-subhead">{{ applicantText.response }}</td>
                <td colspan="11" class="table-subhead">{% if question.applicant_answer is True and question.applicant_complementary_response is not None %}{{ applicantText.complementary_question }}{% endif %}</td>
              </tr>
            </tbody>
            <tbody>
              <tr>
                <td colspan="1"></td>
                <td colspan="11">{{ question.question_text }}</td>
                <td colspan="1"></td>
                <td colspan="3">{% if question.applicant_answer is True %}Yes{% else %}No{% endif %}</td>
                <td colspan="11">{% if question.applicant_answer is True and question.applicant_complementary_response is not None %}{{ question.complementary_question_text }}{% else %}{% endif %}</td>
              </tr>
            </tbody>
            {% if question.applicant_answer == True and question.applicant_complementary_response is not None %}
            <tbody>
              <tr>
                <td colspan="1"></td>
                <td colspan="11" class="table-subhead">Complementary Response</td>
                <td colspan="1"></td>
                <td colspan="3" class="table-subhead">Score</td>
                <td colspan="11" class="table-subhead">Analysis</td>
              </tr>
            </tbody>
            <tbody>
              <tr>
                <td colspan="1"></td>
                <td colspan="11" name="position-classification">{{ question.applicant_complementary_response }}</td>
                <td colspan="1"></td>
                <td colspan="3" name="position-classification"></td>
                <td colspan="11" name="position-classification"></td>
              </tr>
            </tbody>
            {% endif %}
            {% endfor %}
          </table>
          <!-- Date and time position was added -->
          <!-- <div class="row position-bottom-buttons">
               <h6 class="btn-flat right black-text">Application added: 2019-06-12</h6>
               </div> -->
        </div>
      </div>
    </div>
  </form>
  <!-- MaterializeCSS JS library  -->
  <script src="{% static 'js/materialize.js' %}"></script>
  <!-- Script for expanding and collapsing table rows -->
  <script src="{% static 'js/tables.js' %}"></script>
  {% endblock %}
